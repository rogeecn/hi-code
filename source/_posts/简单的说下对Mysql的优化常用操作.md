---
title: 简单的说下对Mysql的优化常用操作
date: 2018-01-05 00:00:00
tags: ["MySQL"]
abbrlink: simple-tips-to-optimize-mysql
img: ""
comments: false
---

现在大概列出如下:(忘各位补充)

### 数据库的设计
尽量把数据库设计的更小的占磁盘空间.

1. 尽可能使用更小的整数类型.(mediumint就比int更合适. 
2. 尽可能的定义字段为`not null`,除非这个字段需要`null`.
3. 如果没有用到变长字段的话比如`varchar`,那就采用固定大小的纪录格式比如`char`.
4. 表的主索引应该尽可能的短.这样的话每条纪录都有名字标志且更高效.
5. 只创建确实需要的索引。索引有利于检索记录，但是不利于快速保存记录。如果总是要在表的组合字段上做搜索，那么就在这些字段上创建索引。索引的第一部分必须是最常使用的字段.如果总是需要用到很多字段，首先就应该多复制这些字段，使索引更好的压缩。
6. 所有数据都得在保存到数据库前进行处理。
7. 所有字段都得有默认值。
8. 在某些情况下,把一个频繁扫描的表分成两个速度会快好多。在对动态格式表扫描以取得相关记录时，它可能使用更小的静态格式表的情况下更是如此。



### 系统的用途

1. 尽量使用长连接.
2. explain 复杂的SQL语句。
3. 如果两个关联表要做比较话，做比较的字段必须类型和长度都一致.
4. LIMIT语句尽量要跟order by或者 distinct.这样可以避免做一次full table scan.
5. 如果想要清空表的所有纪录,建议用truncate table tablename而不是delete from tablename.
6. 能使用STORE PROCEDURE 或者 USER FUNCTION的时候.
7. 在一条insert语句中采用多重纪录插入格式.而且使用load data infile来导入大量数据，这比单纯的indert快好多.
8. 经常OPTIMIZE TABLE 来整理碎片.
9. 还有就是date 类型的数据如果频繁要做比较的话尽量保存在unsigned int 类型比较快。

### 系统的瓶颈
1. **磁盘搜索:**并行搜索,把数据分开存放到多个磁盘中，这样能加快搜索时间.
2. **磁盘读写(IO):**可以从多个媒介中并行的读取数据。
3. **CPU周期:**数据存放在主内存中.这样就得增加CPU的个数来处理这些数据。
4. **内存带宽:** 当CPU要将更多的数据存放到CPU的缓存中来的话,内存的带宽就成了瓶颈.
